<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=windows-1250">
   <meta name="generator" content="PSPad editor, www.pspad.com">
   <link rel="stylesheet" type="text/css" href="../style.css">
   <title>36PAA - ulohy (Michal Trs)</title>
</head>
<body>
   <h1>36PAA - Problém vážené splnitelnosti booleovské formule - simulované ochlazování</h1>

   <div id="main">
      <h2>Zadání</h2>
      <p>
         Je dána booleovská formule <span
         style="font-style: italic;">F</span> promìnných <span
         style="font-style: italic;">X</span>=(<span style="font-style: italic;">x</span><sub>1</sub>,

         <span style="font-style: italic;">x</span><sub>2</sub>, ... , <span
         style="font-style: italic;">x<sub>n</sub></span>) v
         konjunktivní normální formì (tj. souèin souètù).
         Dále jsou dány celoèíselné kladné
         váhy <span style="font-style: italic;">W</span>=(<span
         style="font-style: italic;">w</span><sub>1</sub>, <span
         style="font-style: italic;">w</span><sub>2</sub>, ... , <span
         style="font-style: italic;">w<sub>n</sub></span>).&nbsp; Najdìte
         ohodnocení <span style="font-style: italic;">Y</span>=(<span
         style="font-style: italic;">y</span><sub>1</sub>, <span
         style="font-style: italic;">y</span><sub>2</sub>, ... , <span
         style="font-style: italic;">y<sub>n</sub></span>) promìnných <span
         style="font-style: italic;">x</span><sub>1</sub>, <span
         style="font-style: italic;">x</span><sub>2</sub>, ... , <span
         style="font-style: italic;">x<sub>n </sub></span>tak, aby <span
         style="font-style: italic;">F</span>(<span style="font-style: italic;">Y</span>)=1
         a souèet vah promìnných, které jsou ohodnoceny
         jednièkou,&nbsp; byl maximální. <br>

         <br>
         <b>Je pøípustné se omezit na formule, v nichž má
         každá formule právì 3 literály (problém 3
         SAT).</b> Takto
         omezený problém je stejnì tìžký, ale možná
         se lépe programuje a lépe se posuzuje obtížnost
         instance (viz Selmanova prezentace v odkazech).
      </p>

      
      <h2>Popis algoritmu</h2>
         <p>
         Z pokroèilých iterativních metod jsem si vybral algoritmus simulované ochlazování.
         Je popsán "vývojovými diagramy" na následujících obrázcích.
         </p>

         <table><tr>
            <td><img src="algoritmus/simanel.png"/></td>
            <td><img src="algoritmus/try.png"/></td>
         </tr></table>
         
         <p>
         Pokusím se algoritmus popsat slovnì. Jedná se o 2 vnoøené cykly. Na zaèátku je nastaveno
         nìjaké øešení a poèáteèní teplota, která se ve venkovním cyklu postupnì snižuje.
         Teplotou je dána ochota algoritmu pøijmout horší øešení. Tím se mùže algoritmus vymanit
         z lokálního minima. Ve vnitøním cyklu se hledá nové øešení. To je popsáno na obrázku jako
         funkce "try". Náhodnì vygenerujeme nové øešení (oproti úloze "Batoh" pøijímáme i øešení, kdy
         je formule nesplnìná). Pokud je lepší než doposud nalezené, toto øešení pøijmeme.
         Pokud je horší tak jej pøijmeme s urèitou pravdìpodobností, která je dána
         aktuální teplotou a velikostí zhoršení ceny. Algoritmus konèí pokud se teplota sníží na úroveò
         teploty tuhnutí. Pro správnou funkci algoritmu je velice dùležité nastavit parametry
         (poèáteèní teplota, teplota tuhnutí, rychlost tuhnutí, velikost equilibria).
         </p>
         

      <h2>Implementace</h2>
         
         
         <h3>Formát vstupního souboru</h3>
         <p>
            Formát vstupního souboru jsem pøevzal od Martina Prchlíka. Oproti DIMACS CNF formátu obsahuje
            váhy promìnných a nejlepší øešení dodané BruteForcem. Popis formátu (øádkù):
            <ul>
               <li><b>1.</b> - prázdný øádek</li>
               <li><b>2.</b> - správné øešení</li>
               <li><b>3.</b> - poèet_promìnných poèet_klausulí poèet_promìnných_v_klausuli</li>
               <li><b>4 - n.</b> - jednotlivé klausule (èíslo je index promìnné, èíslováno od 1, pokud je èíslo záporné znamená negovanou promìnnou</li>
               <li><b>n+1</b> - váhy promìnných</li>
            </ul>
         <p>
         
         
         <h3>Zdrojové kódy (C#)</h3>
            <ul>
               <li><a href="source/MPFormatInputReader.cs">MPFormatInputReader.cs</a> - Reader vstupního formátu, vrací tøídu SAT</li>
               <li><a href="source/Program.cs">Program.cs</a> - obalující kód pro experimenty, mìøení èasu a chyb</li>
               <li><a href="source/SAT.cs">SAT.cs</a> - tøída reprezentující data formule, váhy, metody pro vyhodnocení splnitelnosti a ohodnocení stavu</li>
               <li><a href="source/SimAnneal.cs">SimAnneal.cs</a> - Algoritmus simulované ochlazování, v constructoru oèekává tøídu SAT a parametry simulovaného ochlazování</li>
            </ul>
            
            
         <h3>Ohodnocovací funkce <i>getGrant</i></h3>
         <p>
            Návrh této funkce je velice dùležitý pro správnou funkci celého algoritmu. Jsou na ní kladeny tyto požadavky:
            <ul>
               <li>Zvýhodòovat promìnné s vìtší váhou</li>
               <li>Znevýhodòovat nesplnìné klausule</li>
            </ul>
            Implementoval jsem ji tak, že seète váhy promìnných nastavených na <i>true</i> a od nich odeète maximální váhu promìnné pro každou nesplnìnou klausuli.
            Z toho vyplívá, že pokud je formule splnìná vrací souèet vah promìnných.
         </p>
               

      <h2>Namìøené hodnoty a výsledky</h2>
         <p>
            Aby bylo možné správnì nastavit parametry algoritmu je nutné experimentovat.
            Pøi experimentech jsem sledoval graf prùchodu stavovým prostorem, èasovou nároènost a relativní chybu.
            Pro výpoèet relativní chyby jsem použil hodnoty ze vstupního souboru.
            Z dùvodu èasové nároènosti mám k dispozici data pro 20 promìnných a 50, 75 a 90 klausulí.
            Experimenty jsou shrnuty v následujících tabulkách a grafech.<br/><br/>
            Pro pøehlednost jsem použil tyto zkratky:<br/><br/>
            <code>
               T0 = poèáteèní teplota<br/>
               Tf = teplota tuhnutí<br/>
               dT = zmìna teploty<br/>
               equ = equilibrium<br/>
               NF = øešení nenalezeno<br/>
               time = èas v ms<br/>
               Avg (AvgErr) = prùmìrná relativní chyba výsledku z <b>k</b> mìøení<br/>
               Best (BestErr) = nejnižší relativní chyba vybraná z <b>k</b> mìøení
            </code>
         </p>

         <p>Pokud není uvedeno jinak, jsou nastaveny toto hodnoty: T0_k = 0.1,Tf = 1,dT = 0.9, equ_k = 1.
         Algoritmus byl na každé instanci spuštìn 5x a výsledná relativní chyba a èas je prùmìr z výsledkù algoritmu. Takto bylo postupováno pro každou instanci (50 instancí pro každou velikost problému).</p>
         <p>
            Teplota tuhnutí (Tf) a rychlost zmìny (dT) jsou zadány absolutnì. Naproti tomu poèáteèní teplota (T0) a velikost equilibria (equ) jsou vztaženy k velikosti instance (mìníme pouze multiplikativní konstantu) takto:<br/><br/>
            <code>
               T0 = T0_k * var_count * maxW;<br/>
               equ = equ_k * var_count;<br/><br/>
            </code>
            kde <code>var_count</code> je poèet promìnných a <code>maxW</code> je maximální váha promìnné.
            
            
         </p>
         <p>Mìøil jsem na NTB s procesorem Centino 1.4GHz, nastavení max Performance pøi napájení z adaptéru. Použitý OS: Windows XP SP2 s .net Framework 2.</p>


      <h3>Nastavení rychlosti ochlazování</h3>
      <p>
      Pøi tomto experimentu jsem mìnil dT od 0.5 do 0.995
      </p>
      
      <h4>Tabulka è.1</h4>
      <table>
         <tr><th rowspan="2">dT</th><th colspan="4">50 klausulí</th><th colspan="4">75 klausulí</th><th colspan="4">90 klausulí</th></tr>
         <tr><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th></tr>
         <tr><td>0,995</td><td>0,00%</td><td>223,7</td><td>1,70%</td><td>0,20%</td><td>0,00%</td><td>275,9</td><td>2,90%</td><td>0,20%</td><td>0,80%</td><td>316,2</td><td>1,90%</td><td>0,80%</td></tr>
         <tr><td>0,945</td><td>0,00%</td><td>17,3</td><td>4,40%</td><td>0,60%</td><td>0,40%</td><td>25,7</td><td>4,20%</td><td>1,80%</td><td>4,80%</td><td>27,7</td><td>1,50%</td><td>0,50%</td></tr>
         <tr><td>0,898</td><td>0,00%</td><td>9,5</td><td>4,20%</td><td>0,70%</td><td>2,40%</td><td>13,6</td><td>4,20%</td><td>1,70%</td><td>5,20%</td><td>14,9</td><td>1,30%</td><td>2,10%</td></tr>
         <tr><td>0,853</td><td>0,00%</td><td>6,3</td><td>6,50%</td><td>1,40%</td><td>1,60%</td><td>8,7</td><td>4,40%</td><td>3,70%</td><td>7,20%</td><td>10,1</td><td>1,30%</td><td>0,90%</td></tr>
         <tr><td>0,81</td><td>0,00%</td><td>4,6</td><td>6,60%</td><td>2,70%</td><td>3,20%</td><td>6,4</td><td>3,80%</td><td>4,00%</td><td>9,60%</td><td>7,5</td><td>0,90%</td><td>0,70%</td></tr>
         <tr><td>0,77</td><td>0,00%</td><td>4</td><td>7,20%</td><td>3,90%</td><td>5,20%</td><td>5,2</td><td>3,30%</td><td>4,30%</td><td>10,00%</td><td>6,2</td><td>0,50%</td><td>0,80%</td></tr>
         <tr><td>0,731</td><td>0,00%</td><td>3,1</td><td>6,90%</td><td>4,30%</td><td>5,60%</td><td>4,4</td><td>3,60%</td><td>6,00%</td><td>11,60%</td><td>4,8</td><td>0,60%</td><td>3,50%</td></tr>
         <tr><td>0,695</td><td>0,40%</td><td>2,9</td><td>5,50%</td><td>4,70%</td><td>6,80%</td><td>3,8</td><td>2,80%</td><td>4,70%</td><td>12,00%</td><td>4,1</td><td>0,70%</td><td>3,00%</td></tr>
         <tr><td>0,66</td><td>0,00%</td><td>2,4</td><td>7,70%</td><td>5,00%</td><td>4,80%</td><td>3,3</td><td>3,50%</td><td>7,40%</td><td>13,20%</td><td>3,8</td><td>1,60%</td><td>6,20%</td></tr>
         <tr><td>0,627</td><td>0,40%</td><td>2,3</td><td>9,00%</td><td>4,00%</td><td>6,80%</td><td>2,8</td><td>3,40%</td><td>5,90%</td><td>13,20%</td><td>3,4</td><td>0,90%</td><td>3,30%</td></tr>
         <tr><td>0,596</td><td>0,80%</td><td>2</td><td>5,30%</td><td>4,30%</td><td>8,00%</td><td>3</td><td>3,30%</td><td>4,70%</td><td>14,40%</td><td>3,2</td><td>0,10%</td><td>0,60%</td></tr>
         <tr><td>0,566</td><td>2,80%</td><td>1,9</td><td>5,90%</td><td>3,30%</td><td>9,20%</td><td>2,8</td><td>2,90%</td><td>6,90%</td><td>12,00%</td><td>2,8</td><td>0,90%</td><td>2,30%</td></tr>
         <tr><td>0,538</td><td>2,00%</td><td>1,6</td><td>8,90%</td><td>8,00%</td><td>10,80%</td><td>2,3</td><td>2,70%</td><td>6,10%</td><td>12,80%</td><td>2,4</td><td>0,50%</td><td>2,20%</td></tr>
         <tr><td>0,511</td><td>1,60%</td><td>1,5</td><td>10,10%</td><td>10,60%</td><td>10,80%</td><td>1,9</td><td>2,30%</td><td>9,00%</td><td>12,40%</td><td>2,4</td><td>1,00%</td><td>3,00%</td></tr>
      </table>
      
      <h4>Grafy è.1</h4>
      <table>
         <tr>
            <td><a href="grafy/Err-dt.html">relativní chyba</a></td>
            <td><a href="grafy/nf-dt.html"># nenalezených stavù</a></td>
            <td><a href="grafy/t-dt.html">èasové složitost</a></td>
            <td><a href="grafy/pruchod-dt.html">prùchod stavovým prostorem</a></td>
         </tr>
         <tr>
            <td><a href="grafy/Err-dt.html"><img src="grafy/small/Err-dt.png"></a></td>
            <td><a href="grafy/nf-dt.html"><img src="grafy/small/nf-dt.png"></a></td>
            <td><a href="grafy/t-dt.html"><img src="grafy/small/t-dt.png"></a></td>
            <td><a href="grafy/pruchod-dt.html"><img src="grafy/small/pruchod_dt090.png"></a></td>
         </tr>
      </table>

      
      <h3>Nastavení velikosti equilibria</h3>

      Pøi tomto experimentu jsem mìnil equ_k od 1 do 10. Pouze pøipomenu, že velikost
      equilibria je vztažená k velikosti instance a to takto: <code>equ = equ_k * var_count</code>.

      <h4>Tabulka è.2</h4>
      <table>
         <tr><th rowspan="2">equ_k</th><th colspan="4">50 klausulí</th><th colspan="4">75 klausulí</th><th colspan="4">90 klausulí</th></tr>
         <tr><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th></tr>
         <tr><td>1</td><td>0,00%</td><td>10,9</td><td>4,60%</td><td>0,50%</td><td>1,20%</td><td>13,1</td><td>3,30%</td><td>1,70%</td><td>6,00%</td><td>15,2</td><td>1,50%</td><td>0,90%</td></tr>
         <tr><td>2</td><td>0,00%</td><td>19,5</td><td>3,40%</td><td>0,20%</td><td>0,00%</td><td>26,2</td><td>4,50%</td><td>3,00%</td><td>2,40%</td><td>30,1</td><td>2,00%</td><td>2,10%</td></tr>
         <tr><td>3</td><td>0,00%</td><td>28,9</td><td>2,90%</td><td>0,20%</td><td>0,00%</td><td>39,2</td><td>4,50%</td><td>1,30%</td><td>2,40%</td><td>45</td><td>2,30%</td><td>1,40%</td></tr>
         <tr><td>4</td><td>0,00%</td><td>38,8</td><td>3,10%</td><td>0,40%</td><td>0,00%</td><td>52,3</td><td>3,90%</td><td>1,10%</td><td>2,80%</td><td>60</td><td>1,80%</td><td>0,50%</td></tr>
         <tr><td>5</td><td>0,00%</td><td>47,8</td><td>2,80%</td><td>0,30%</td><td>0,40%</td><td>65,1</td><td>3,40%</td><td>0,70%</td><td>3,20%</td><td>76,9</td><td>1,90%</td><td>1,10%</td></tr>
         <tr><td>6</td><td>0,00%</td><td>57,4</td><td>2,00%</td><td>0,10%</td><td>0,00%</td><td>79,8</td><td>3,30%</td><td>1,10%</td><td>0,80%</td><td>90,6</td><td>1,80%</td><td>1,30%</td></tr>
         <tr><td>7</td><td>0,00%</td><td>68,9</td><td>2,30%</td><td>0,20%</td><td>0,40%</td><td>93,1</td><td>3,60%</td><td>0,20%</td><td>1,20%</td><td>105,4</td><td>2,30%</td><td>0,80%</td></tr>
         <tr><td>8</td><td>0,00%</td><td>77,5</td><td>2,40%</td><td>0,40%</td><td>0,00%</td><td>104,8</td><td>3,50%</td><td>1,20%</td><td>1,20%</td><td>122,3</td><td>2,30%</td><td>0,70%</td></tr>
         <tr><td>9</td><td>0,00%</td><td>85,7</td><td>2,20%</td><td>0,30%</td><td>0,00%</td><td>119,6</td><td>3,50%</td><td>0,70%</td><td>2,80%</td><td>139,4</td><td>1,90%</td><td>0,50%</td></tr>
         <tr><td>10</td><td>0,00%</td><td>97,9</td><td>2,00%</td><td>0,20%</td><td>0,40%</td><td>132,6</td><td>3,40%</td><td>0,80%</td><td>2,40%</td><td>157,5</td><td>2,00%</td><td>0,50%</td></tr>
      </table>
      
      <h4>Grafy è.2</h4>
      <table>
         <tr>
            <td><a href="grafy/Err-equ.html">relativní chyba</a></td>
            <td><a href="grafy/nf-equ.html"># nenalezených stavù</a></td>
            <td><a href="grafy/pruchod-equ.html">prùchod stavovým prostorem</a></td>
         </tr>
         <tr>
            <td><a href="grafy/Err-equ.html"><img src="grafy/small/Err-equ.png"></a></td>
            <td><a href="grafy/nf-equ.html"><img src="grafy/small/nf-equ.png"></a></td>
            <td><a href="grafy/pruchod-equ.html"><img src="grafy/small/pruchod_equ2.png"></a></td>
         </tr>
      </table>


      <h3>Nastavení teploty tuhnutí</h3>

      Pøi tomto experimentu jsem mìnil Tf od 1 do 10.
       
      <h4>Tabulka è.3</h4>
      <table>
         <tr><th rowspan="2">Tf</th><th colspan="4">50 klausulí</th><th colspan="4">75 klausulí</th><th colspan="4">90 klausulí</th></tr>
         <tr><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th></tr>
         <tr><td>1</td><td>0,00%</td><td>10,5</td><td>4,50%</td><td>0,90%</td><td>1,20%</td><td>13,6</td><td>4,00%</td><td>1,30%</td><td>5,20%</td><td>15,8</td><td>1,50%</td><td>1,20%</td></tr>
         <tr><td>2</td><td>0,00%</td><td>8,6</td><td>5,60%</td><td>1,00%</td><td>1,60%</td><td>13</td><td>3,30%</td><td>2,30%</td><td>5,20%</td><td>13,3</td><td>1,80%</td><td>1,70%</td></tr>
         <tr><td>3</td><td>0,00%</td><td>7,7</td><td>5,50%</td><td>1,00%</td><td>1,20%</td><td>11,9</td><td>3,20%</td><td>2,30%</td><td>6,00%</td><td>12,6</td><td>1,20%</td><td>1,40%</td></tr>
         <tr><td>4</td><td>0,00%</td><td>7</td><td>5,00%</td><td>0,90%</td><td>1,20%</td><td>10,4</td><td>3,50%</td><td>0,70%</td><td>6,00%</td><td>11,7</td><td>1,40%</td><td>1,20%</td></tr>
         <tr><td>5</td><td>0,00%</td><td>7,2</td><td>4,00%</td><td>0,50%</td><td>1,60%</td><td>9,8</td><td>5,00%</td><td>2,30%</td><td>5,20%</td><td>11,3</td><td>1,20%</td><td>0,40%</td></tr>
         <tr><td>6</td><td>0,00%</td><td>6,5</td><td>4,60%</td><td>1,00%</td><td>2,00%</td><td>8,9</td><td>4,00%</td><td>1,90%</td><td>6,00%</td><td>10,3</td><td>1,70%</td><td>3,70%</td></tr>
         <tr><td>7</td><td>0,40%</td><td>6</td><td>5,40%</td><td>2,40%</td><td>3,20%</td><td>9,4</td><td>3,30%</td><td>0,70%</td><td>5,60%</td><td>9,7</td><td>1,30%</td><td>1,00%</td></tr>
         <tr><td>8</td><td>0,00%</td><td>5,6</td><td>7,10%</td><td>1,40%</td><td>2,00%</td><td>8,2</td><td>4,70%</td><td>2,30%</td><td>5,20%</td><td>9,4</td><td>1,30%</td><td>1,50%</td></tr>
         <tr><td>9</td><td>0,00%</td><td>5,8</td><td>6,30%</td><td>1,90%</td><td>1,20%</td><td>8,5</td><td>4,70%</td><td>2,90%</td><td>5,60%</td><td>9,3</td><td>1,30%</td><td>1,20%</td></tr>
         <tr><td>10</td><td>0,40%</td><td>5,6</td><td>6,60%</td><td>1,40%</td><td>2,00%</td><td>8,4</td><td>3,80%</td><td>1,50%</td><td>5,60%</td><td>9,2</td><td>1,40%</td><td>3,20%</td></tr>
      </table>
      
      <h4>Graf è.3: Závislost relativní chyby na teplotì tuhnutí</h4>
      <p><img src="grafy/Err-tf.png"/></p>


      <h3>Nastavení poèáteèní teploty</h3>
      
      Pøi tomto experimentu jsem mìnil T0 od 0,1 do 1. Pouze pøipomenu, že velikost
      poèáteèní teploty je vztažena k velikosti instance a to takto: <code>T0 = T0_k * var_count * maxW</code>.

      <h4>Tabulka è.4</h4>
      <table>
         <tr><th rowspan="2">T0_k</th><th colspan="4">50 klausulí</th><th colspan="4">75 klausulí</th><th colspan="4">90 klausulí</th></tr>
         <tr><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th><th>NF</th><th>time</th><th>AvgErr</th><th>BestErr</th></tr>
         <tr><td>0,1</td><td>0,00%</td><td>9,9</td><td>4,90%</td><td>1,00%</td><td>1,20%</td><td>13</td><td>4,40%</td><td>2,00%</td><td>4,40%</td><td>15,1</td><td>1,30%</td><td>0,80%</td></tr>
         <tr><td>0,2</td><td>0,00%</td><td>11</td><td>4,80%</td><td>0,40%</td><td>0,40%</td><td>15,1</td><td>3,60%</td><td>1,30%</td><td>5,60%</td><td>17</td><td>1,10%</td><td>2,80%</td></tr>
         <tr><td>0,3</td><td>0,00%</td><td>11,3</td><td>5,40%</td><td>0,60%</td><td>0,80%</td><td>15,9</td><td>4,10%</td><td>1,80%</td><td>4,00%</td><td>18,1</td><td>1,50%</td><td>1,70%</td></tr>
         <tr><td>0,4</td><td>0,00%</td><td>11,8</td><td>4,90%</td><td>1,00%</td><td>1,20%</td><td>16,4</td><td>3,70%</td><td>0,40%</td><td>6,40%</td><td>19,3</td><td>1,50%</td><td>1,00%</td></tr>
         <tr><td>0,5</td><td>0,00%</td><td>11,9</td><td>5,00%</td><td>1,20%</td><td>2,80%</td><td>16,3</td><td>3,90%</td><td>1,70%</td><td>6,00%</td><td>19,5</td><td>1,40%</td><td>1,00%</td></tr>
         <tr><td>0,6</td><td>0,00%</td><td>12,3</td><td>5,40%</td><td>0,60%</td><td>1,60%</td><td>17,6</td><td>4,70%</td><td>1,10%</td><td>5,60%</td><td>20,4</td><td>1,40%</td><td>0,90%</td></tr>
         <tr><td>0,7</td><td>0,00%</td><td>12,6</td><td>5,00%</td><td>0,80%</td><td>2,00%</td><td>17,9</td><td>4,00%</td><td>2,20%</td><td>4,40%</td><td>21,4</td><td>1,50%</td><td>0,70%</td></tr>
         <tr><td>0,8</td><td>0,00%</td><td>12,9</td><td>5,40%</td><td>0,80%</td><td>0,80%</td><td>17,3</td><td>4,70%</td><td>2,60%</td><td>5,20%</td><td>20,7</td><td>1,10%</td><td>1,00%</td></tr>
         <tr><td>0,9</td><td>0,00%</td><td>12,9</td><td>5,00%</td><td>0,40%</td><td>1,20%</td><td>18,1</td><td>4,10%</td><td>1,30%</td><td>5,20%</td><td>21,1</td><td>1,80%</td><td>0,70%</td></tr>
         <tr><td>1</td><td>0,00%</td><td>13,6</td><td>5,00%</td><td>0,40%</td><td>1,20%</td><td>18,5</td><td>3,90%</td><td>2,60%</td><td>5,20%</td><td>21,1</td><td>1,50%</td><td>1,80%</td></tr>
      </table>

      <h4>Grafy è.4</h4>
      <table>
         <tr>
            <td><a href="grafy/Err-t0.html">relativní chyba</a></td>
            <td><a href="grafy/nf-t0.html"># nenalezených stavù</a></td>
            <td><a href="grafy/pruchod-t0.html">prùchod stavovým prostorem</a></td>
         </tr>
         <tr>
            <td><a href="grafy/Err-t0.html"><img src="grafy/small/Err-t0.png"></a></td>
            <td><a href="grafy/nf-t0.html"><img src="grafy/small/nf-t0.png"></a></td>
            <td><a href="grafy/pruchod-t0.html"><img src="grafy/small/pruchod_t0-05.png"></a></td>
         </tr>
      </table>


      <h3>Sledování poètu nalezených øešení a relativní chyby na poètu spuštìní algoritmu</h3>

      Jelikož algoritmus simulované ochlazování je randomizovaný, dává pøi každém spuštìní jiné výsledky.
      Pokud chceme zlepšit výsledky, spustíme algoritmus vícekrát a z výsledkù vybereme to nejlepší.
      
      <h4>Graf è.5: Závislost relativní chyby na poètu spuštìní algoritmu</h4>
      <p><img src="grafy/Err-repeat.png"/></p>
      
      <h4>Graf è.6: Závislost # nenalezených øešení na poètu spuštìní algoritmu</h4>
      <p><img src="grafy/nf-repeat.png"/></p>


      <h2>Závìr</h2>
         Algoritmus simulované ochlazování je pomìrnì snadný na implementaci.
         Jako nejdùležitìjší krok vidím ve správném navrhnutí ohodnocovací funkce, tak aby algoritmus nutila ke správnému øešení.<br/> Vztažení parametrù k poètu promìnných a maximální váze se ukázalo správné. Pro instance, které byly k dispozici (20/50, 20/75, 20/91 - poèet promìnných / poèet klausulí), se ukázalo toto nastavení jako optimální:
<ul>
   <li>Poèáteèní teplota T0 = 0,1 * var_count * maxW;</li>
   <li>Teplota tuhnutí Tf = 1</li>
   <li>Rychlost ochlazování dT = 0,9</li>
   <li>Velikost equilibria equ = 1 * var_count;</li>
</ul>

   Pro tyto hodnoty se nepodaøilo nalézt øešení maximálnì ve 14% pøípadù a chyba oproti nejlepšímu øešení dodaného ze vstupu byla 2%. K tìmto výsledkùm velkou mìrou pøispívá opakování výpoètu každé instance 5x.<br/>
         
         U tohoto algoritmu (stejnì jako u dynamického programování) dopøedu známe poèet iterací cyklu, tudíž mùžeme odhadnout èasovou nároènost. Proto u nìkterých mìøení chybí èasová závislost (chápavý ètenáø ji z popisu algoritmu snadno odvodí).
         
         
         Dále z provedených experimentù mùžeme udìlat tyto závìry:
         <ul>
         <li>Èím blíže dT k 1 tím menší relativní chyba, ale vìtší èasová nároènost.</li>
         <li>Poèáteèní teplotu je vhodné volit jako funkci velikosti instance.</li>
         <li>Teplotu tuhnutí je nejlepší "vykoukat" z grafù pro závislost ceny na poètu prozkoumaných stavù. Pokud se cena nemìní, mìlo by dojít k zamrazení. To mùžeme pøímo ošetøit v programu a nemusíme tento parametr nastavovat.</li>
         <li>Velikost equilibria, èím vìtší tím menší relativní chyba, ale vìtší èasová nároènost.</li>
         <li>Zvýšení poètu opakování výpoètu jedné instance zvyšuje procento nalezených øešení a snižuje chybu výsledku. Èasovou nároènost lineárnì zvyšuje.</li>
         <li>Pro vìtší poèet klausulí je obtížnìjší nalézt øešení</li>
         </ul>


   </div>


</body>
</html>
