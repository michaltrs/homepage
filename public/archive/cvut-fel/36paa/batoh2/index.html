<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=windows-1250">
   <meta name="generator" content="PSPad editor, www.pspad.com">
   <link rel="stylesheet" type="text/css" href="../style.css">
   <title>36PAA - ulohy (Michal Trs)</title>
</head>
<body>
   <h1>36PAA - Batoh 2</h1>

   <div id="main">
      <h2>Zad�n�</h2>
      <ul>
         <li>Naprogramujte �e�en� 0/1 probl�mu batohu metodou v�tv� a hranic (B&B) tak, aby omezuj�c�m faktorem byla hodnota optimaliza�n�ho krit�ria. Tj. pou�ijte o�ez�v�n� shora (p�ekro�en� kapacity batohu) i zdola (st�vaj�c� �e�en� nem��e b�t lep�� ne� nejlep�� dosud nalezen�)</li>
         <li>Naprogramujte �e�en� 0/1 probl�mu batohu nebo alespo� 0/1 exaktn�ho probl�mu batohu bez cen metodou dynamick�ho programov�n�.</li>
         <li>Naprogramujte �e�en� 0/1 probl�mu batohu heuristikou podle pom�ru cena/hmotnost s testem nejcenn�j�� v�ci.</li>
      </ul>

      <h2>Definice probl�mu</h2>
      <ul>
         <li>Je d�no:
         <ul>
            <li>cel� ��slo n (po�et v�c�)</li>
            <li>cel� ��slo M (kapacita batohu)</li>
            <li>kone�n� mno�ina V={v1, v2, ... ,vn} (hmotnosti v�c�)</li>
            <li>kone�n� mno�ina C={c1, c2, ... ,cn} (ceny v�c�)</li>
         </ul></li>

         <li>Zkonstruujte mno�inu X={x1, x2, ... ,xn}, kde ka�d� xi je 0 nebo 1, tak, aby
         <ul>
            <li><b>platilo:</b> v1x1+v2x2 + ... + vnxn <= M (batoh nebyl p�et�en).</li>
            <li><b>v�raz</b> c1x1+c2x2 + ... + cnxn nab�val maxim�ln� hodnoty pro v�echny takov� mno�iny (cena v�c� v batohu byla maxim�ln�).</li>
         </ul></li>
      </ul>



      <h2>Implementace</h2>
      �lohu jsem implementoval v Jazyce C# jako konzolovou aplikaci. N�zev souboru se vstupn�mi daty je prvn� argument a je povinn�. Druh� argument je nepovinn� a ud�v� po�et opakov�n� v�po�tu jedn� instance (D�le�it� pouze p�i m��en� �asu).<br/>Maxim�ln� jsem recykloval �lohu "batoh 1" (virtu�ln� t��da batoh a t��du program, kde je implementov�no m��en� �asu)<ul>
         <li><a href="source/Batoh.cs">Batoh.cs</a> - Virtu�ln� t��da, m� implementovanou metody pro �ten� vstupn�ho souboru a virtu�ln� metodu Compute().</li>
         <li><a href="source/Program.cs">Program.cs</a> - Vol� metodu Compute() a m��� �as.</li>
         <li><a href="source/GreedyProofMod.cs">GreedyProofMod.cs</a> - Kombinovan� heuristika, roz���en� jednoduch� heuristiky (batoh 1) o test nejcenn�j�� v�ci. Naleznu nejcenn�j�� v�c a pokud je jej� cena lep�� ne� v�sledek jednoduch� heuristiky (GreedyProof) ozna��m ji za v�sledek.</li>
         <li><a href="source/Dyn.cs">Dyn.cs</a> - Dynamick� programov�n� dekompozic� podle kapacity batohu. (algoritmus pro vypln�n� 2D pole - slide cv.3)</li>
         <li><a href="source/BB.cs">BB.cs</a> - Metoda v�tv� a hranic. Vych�z� z BruteForce - DFS (batoh 1), kter� je implementov�no rekurzivn� s o�ez�v�n�m nep��pustn�ch stav� (p�ekro�en� kapacity batohu). Je p�id�no o�ez�n� neperspektivn�ch stav� po nalezen� �e�en� (pokud expandov�n�m sou�asn�ho stavu nem��u dostat lep�� �e�en�, ne� kter� je nalezeno, tento stav d�le neexpanduji)</li>
      </ul>


      <h2>Nam��en� hodnoty a v�sledky</h2>
      <p>M��il jsem na NTB s procesorem Centino 1.4GHz, nastaven� max Performance p�i nap�jen� z adapt�ru. Pou�it� OS: Windows XP SP2 s .net Framework 2.</p>

      <h3>Tabulka: Srovn�n� v�po�etn�ch �as�</h3>
      <p>Proto�e rozli�en� ��ta�e (Environment.TickCount) je 16 ms, je nutn� instance spo��tat v�cekr�t a v�sledn� �as z�skat vyd�len�m po�tem opakov�n�. Po�et opakov�n� jsem nastavoval experiment�ln�, tak aby bylo rozli�en� �asu dostate�n�).</p>

      <table>
         <tr><th>n</th><th>hrub� s�la [ms]</th><th>heuristika [ms]</th><th> kombinovan� heuristika [ms]</th><th>Dynamick� programov�n� [ms]</th><th>B&B [ms]</th></tr>
         <tr><td>4</td><td>0,008</td><td>0,007</td><td>0,007</td><td>0,027</td><td>0,007</td></tr>
         <tr><td>10</td><td>0,044</td><td>0,015</td><td>0,014</td><td>0,063</td><td>0,033</td></tr>
         <tr><td>15</td><td>1,230</td><td>0,021</td><td>0,020</td><td>0,168</td><td>0,13</td></tr>
         <tr><td>20</td><td>36,87</td><td>0,027</td><td>0,026</td><td>0,268</td><td>3,43</td></tr>
         <tr><td>22</td><td>136,74</td><td>0,030</td><td>0,030</td><td>0,292</td><td>14,24</td></tr>
         <tr><td>25</td><td>1140,04</td><td>0,034</td><td>0,035</td><td>0,393</td><td>101,33</td></tr>
         <tr><td>27</td><td>4803,90</td><td>0,036</td><td>0,036</td><td>0,490</td><td>400,76</td></tr>
         <tr><td>30</td><td>38723,10</td><td>0,041</td><td>0,039</td><td>0,626</td><td>3371,26</td></tr>
      </table>

      <h3>Tabulka: Pr�m�rn� chyba heuristik</h3>
      <table>
         <tr><th>n</th><td>4</td><td>10</td><td>15</td><td>20</td><td>22</td><td>25</td><td>27</td><td>30</td></tr>
         <tr><th>jednoduch� heuristika</th><td>2,17%</td><td>1,29%</td><td>0,48%</td><td>0,60%</td><td>0,69%</td><td>0,50%</td><td>0,50%</td><td>0,49%</td></tr>
         <tr><th>kombinovan� heuristika</th><td>1,33%</td><td>1,10%</td><td>0,31%</td><td>0,43%</td><td>0,54%</td><td>0,42%</td><td>0,29%</td><td>0,38%</td></tr>
      </table>

      <h3>Tabulka: Maxim�ln� chyba heuristik</h3>
      <table>
         <tr><th>n</th><td>4</td><td>10</td><td>15</td><td>20</td><td>22</td><td>25</td><td>27</td><td>30</td></tr>
         <tr><th>jednoduch� heuristika</th><td>36,36%</td><td>11,48%</td><td>8,54%</td><td>8,43%</td><td>7,23%</td><td>3,68%</td><td>10,60%</td><td>5,51%</td></tr>
         <tr><th>kombinovan� heuristika</th><td>24,75%</td><td>11,48%</td><td>2,77%</td><td>4,08%</td><td>3,02%</td><td>2,59%</td><td>1,85%</td><td>1,75%</td></tr>
      </table>


      <h3>Graf: �asov� z�vislost</h3>
      <p><img src="grafy/slozitost.png" alt="�asov� slo�itost"/></p>

      <h3>Graf: Z�vislost pr�m�rn� chyby na velikosti instance</h3>
      <p><img src="grafy/pr_chyba.png" alt="Z�vislost pr�m�rn� chyby na velikosti instance"/></p>

      <h3>Graf: Z�vislost maxim�ln� chyby na velikosti instance</h3>
      <p><img src="grafy/max_chyba.png" alt="Z�vislost maxim�ln� chyby na velikosti instance"/></p>


      <h2>Z�v�r</h2>
      <p>
         Oproti "jednoduch�m" metod�m �e�en�, pou�it�ch v �loze batoh 1, je z graf� dob�e patrn� velk� sn�en� �asov� n�ro�nosti. Metoda v�tv� a hranic (B&B) p�in�� zlep�en� o jeden ��d oproti DFS. P�itom se jedn� o p�id�n� jedn� podm�nky.<br/>Je�t� mnohem lep��ch v�sledk� dosahuje metoda dynamick�ho programovan�. Sice v porovn�n� s heuristikou (greedyProof) je o ��d pomalej��, ale oproti n� poskytuje v�dy optim�ln� �e�en�. Pouze si mus�me uv�domit pam�ovou slo�itost, kter� je d�na 2D polem, v tomto p��pad� M.n. P�id�n�m testu nejcenn�j�� v�ci do heuristiky se sn�ila pr�m�rn� a maxim�ln� chyba.
      </p>

   </div>


<script src="/archive/lightbox.js"></script>
</body>
</html>
